{% extends "base.html" %}
{% load static %}

{% load crispy_forms_tags %}

{% block content %}
<div class="container">
  <div class="row my-4">
    <div class="col-sm-12 col-md-3 col-lg-2">
      <div class="content-box w-100 shadow rounded-3 py-2 boxes">
        Profile
      </div>
    </div>
    <div class="col-sm-12 col-md-6 col-lg-6">
      <div class="content-box post-box w-100 shadow rounded-3 py-2 boxes">
        <div class="row">
          <div class="col-1">
            <img class="profile-image-post rounded-circle shadow-sm mx-3"
              src="{% static 'img/default-profile-image.png' %}" alt="profile image of author"></div>
          <div class="col-10">
            <button class="btn create-post-btn w-100 rounded-pill text-start mx-3" type="button"
              aria-label="Click here to create a post" data-bs-toggle="modal" data-bs-target="#feed-create-post">Create
              a
              post</button></div>
        </div>
      </div>

      {% for post in posts %}
      <div class="content-box w-100 shadow rounded-3 mt-4 py-2 boxes postition-relative">
        <div class="post-options dropdown text-end position-relative">
          <button class="btn dropdown-toggle rounded-circle position-relative mx-3" type="button"
            data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fa-solid fa-ellipsis position-absolute top-50 start-50 translate-middle"></i>
          </button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Edit</a></li>
            <li><a class="dropdown-item" href="#">Delete</a></li>
            <li><a class="dropdown-item" href="#">Report</a></li>
          </ul>
        </div>
        <div class="author-post d-flex flex-row">
          <div class="w-100">
            <img class="profile-image-post rounded-circle shadow-sm mx-3"
              src="{% static 'img/default-profile-image.png' %}" alt="profile image of author">
            <p class="mx-3 w-100 fs-6">{{post.author}}, <span class="small-and-light">{{post.created_on}}</span></p>
          </div>
        </div>
        <h5 class="w-100 text-center">{{post.title}}</h5>
        <p class="text-center">{{post.content}}</p>
        <div class="w-100">
          <p class="text-start">{{post.count_likes}}</p>
          <p class="text-end"></p>
        </div>
        <hr class="m-1">
        <div class="row py-1">
          <div class="col-4"><button class="btn w-100 p-0">
              <i class="fa-solid fa-thumbs-up"></i> Like
            </button></div>
          <div class="col-4"><button class="btn w-100 p-0">
              <i class="fa-solid fa-comment"></i> Comment
            </button></div>
          <div class="col-4"><button class="btn w-100 p-0">
              <i class="fa-solid fa-share-nodes"></i> Share
            </button></div>
        </div>

      </div>
      {% endfor %}
    </div>
    <div class="col-sm-12 col-md-3 col-lg-4">
      <div class="content-box w-100 shadow rounded-3 py-2 boxes">
        <h6>People you may know</h6>
      </div>
      <div class="content-box w-100 shadow rounded-3 mt-2 boxes">
        <h6>Messages</h6>
      </div>
      <div class="w-100 shadow rounded-3 mt-4">
        {% include "footer.html" %}
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="feed-create-post" tabindex="-1" aria-labelledby="feedCreatePost" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Create a post</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form method="POST" action="/feed/">
          {{ form | crispy }}
          {% csrf_token %}

          <button type="Submit" class="btn btn-primary">Post</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}